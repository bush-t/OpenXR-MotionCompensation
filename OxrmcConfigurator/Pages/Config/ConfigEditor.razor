@using Serilog
@inject ConfigService ConfigService;

<MudPaper>
	<CascadingValue Value="@_selectedTracker">
		<TrackerSelector OnTrackerChanged="SetTracker"/>
	</CascadingValue>
</MudPaper>

@code {

	[CascadingParameter]
	private ConfigItem SelectedConfig { get; set; } = new(ConfigService.defaultApp);

	private Tracker _selectedTracker;
	private string? _lastName;
	private bool _resetTracker = true; // (re)read tracker from config

	public enum Tracker : ushort
    {
		Error = 0,
		Controller,
		Vive,
		Srs,
		FlyPt,
		Yaw
	}

	public async Task SetTracker(Tracker tracker)
	{
		if (Tracker.Error == tracker)
		{
			// TODO: inject logger
			Log.Error("cannot determine tracker type for " + SelectedConfig.displayName);
		}
		_selectedTracker = tracker;
	}
}